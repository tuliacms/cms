/*! For license information please see tulia-filemanager.js.LICENSE.txt */
var TuliaFilemanager;(()=>{var e={669:(e,t,n)=>{e.exports=n(609)},448:(e,t,n)=>{"use strict";var r=n(867),o=n(26),s=n(372),i=n(327),a=n(97),c=n(109),l=n(985),u=n(874),d=n(648),f=n(644),p=n(205);e.exports=function(e){return new Promise((function(t,n){var m,h=e.data,v=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(m),e.signal&&e.signal.removeEventListener("abort",m)}r.isFormData(h)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(E+":"+w)}var x=a(e.baseURL,e.url);function N(){if(b){var r="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};o((function(e){t(e),y()}),(function(e){n(e),y()}),s),b=null}}if(b.open(e.method.toUpperCase(),i(x,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=N:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(N)},b.onabort=function(){b&&(n(new d("Request aborted",d.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()){var O=(e.withCredentials||l(x))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;O&&(v[e.xsrfHeaderName]=O)}"setRequestHeader"in b&&r.forEach(v,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),g&&"json"!==g&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(m=function(e){b&&(n(!e||e&&e.type?new f:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(m),e.signal&&(e.signal.aborted?m():e.signal.addEventListener("abort",m))),h||(h=null);var S=p(x);S&&-1===["http","https","file"].indexOf(S)?n(new d("Unsupported protocol "+S+":",d.ERR_BAD_REQUEST,e)):b.send(h)}))}},609:(e,t,n)=>{"use strict";var r=n(867),o=n(849),s=n(321),i=n(185),a=function e(t){var n=new s(t),a=o(s.prototype.request,n);return r.extend(a,s.prototype,n),r.extend(a,n),a.create=function(n){return e(i(t,n))},a}(n(546));a.Axios=s,a.CanceledError=n(644),a.CancelToken=n(972),a.isCancel=n(502),a.VERSION=n(288).version,a.toFormData=n(675),a.AxiosError=n(648),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(713),a.isAxiosError=n(268),e.exports=a,e.exports.default=a},972:(e,t,n)=>{"use strict";var r=n(644);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},644:(e,t,n)=>{"use strict";var r=n(648);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(867).inherits(o,r,{__CANCEL__:!0}),e.exports=o},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(867),o=n(327),s=n(782),i=n(572),a=n(185),c=n(97),l=n(875),u=l.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var s,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var d=[i,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(c),s=Promise.resolve(t);d.length;)s=s.then(d.shift(),d.shift());return s}for(var f=t;r.length;){var p=r.shift(),m=r.shift();try{f=p(f)}catch(e){m(e);break}}try{s=i(f)}catch(e){return Promise.reject(e)}for(;c.length;)s=s.then(c.shift(),c.shift());return s},d.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},648:(e,t,n)=>{"use strict";var r=n(867);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var s=o.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(o,i),Object.defineProperty(s,"isAxiosError",{value:!0}),o.from=function(e,t,n,i,a,c){var l=Object.create(s);return r.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,n,i,a),l.name=e.name,c&&Object.assign(l,c),l},e.exports=o},782:(e,t,n)=>{"use strict";var r=n(867);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},97:(e,t,n)=>{"use strict";var r=n(793),o=n(303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},572:(e,t,n)=>{"use strict";var r=n(867),o=n(527),s=n(502),i=n(546),a=n(644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},185:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||s,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},26:(e,t,n)=>{"use strict";var r=n(648);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},527:(e,t,n)=>{"use strict";var r=n(867),o=n(546);e.exports=function(e,t,n){var s=this||o;return r.forEach(n,(function(n){e=n.call(s,e,t)})),e}},546:(e,t,n)=>{"use strict";var r=n(867),o=n(16),s=n(648),i=n(874),a=n(675),c={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,d={transitional:i,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(448)),u),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,s=r.isObject(e),i=t&&t["Content-Type"];if((n=r.isFileList(e))||s&&"multipart/form-data"===i){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return s||"application/json"===i?(l(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw s.from(e,s.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){d.headers[e]=r.merge(c)})),e.exports=d},874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},288:e=>{e.exports={version:"0.27.2"}},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},327:(e,t,n)=>{"use strict";var r=n(867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},268:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},985:(e,t,n)=>{"use strict";var r=n(867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},623:e=>{e.exports=null},109:(e,t,n)=>{"use strict";var r=n(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,i={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},675:(e,t,n)=>{"use strict";var r=n(867);e.exports=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,i){if(r.isPlainObject(s)||r.isArray(s)){if(-1!==n.indexOf(s))throw Error("Circular reference detected in "+i);n.push(s),r.forEach(s,(function(n,s){if(!r.isUndefined(n)){var a,c=i?i+"."+s:s;if(n&&!i&&"object"==typeof n)if(r.endsWith(s,"{}"))n=JSON.stringify(n);else if(r.endsWith(s,"[]")&&(a=r.toArray(n)))return void a.forEach((function(e){!r.isUndefined(e)&&t.append(c,o(e))}));e(n,c)}})),n.pop()}else t.append(i,o(s))}(e),t}},875:(e,t,n)=>{"use strict";var r=n(288).version,o=n(648),s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};s.transitional=function(e,t,n){function s(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new o(s(r," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!i[r]&&(i[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),s=r.length;s-- >0;){var i=r[s],a=t[i];if(a){var c=e[i],l=void 0===c||a(c,i,e);if(!0!==l)throw new o("option "+i+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+i,o.ERR_BAD_OPTION)}},validators:s}},867:(e,t,n)=>{"use strict";var r,o=n(849),s=Object.prototype.toString,i=(r=Object.create(null),function(e){var t=s.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function c(e){return Array.isArray(e)}function l(e){return void 0===e}var u=a("ArrayBuffer");function d(e){return null!==e&&"object"==typeof e}function f(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),m=a("File"),h=a("Blob"),v=a("FileList");function g(e){return"[object Function]"===s.call(e)}var y=a("URLSearchParams");function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var E,w=(E="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return E&&e instanceof E});e.exports={isArray:c,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||s.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:d,isPlainObject:f,isUndefined:l,isDate:p,isFile:m,isBlob:h,isFunction:g,isStream:function(e){return d(e)&&g(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function e(){var t={};function n(n,r){f(t[r])&&f(n)?t[r]=e(t[r],n):f(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,s,i={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)i[s=r[o]]||(t[s]=e[s],i[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(l(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:w,isFileList:v}},465:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(311);const o={class:"fm-fg"},s={class:"fm-toolbar"},i={class:"fm-upload-btn"},a={type:"button",class:"btn btn-primary"},c=(0,r.createElementVNode)("span",null,"Upload file",-1),l={class:"fm-buttons"},u=[(0,r.createElementVNode)("i",{class:"btn-icon fas fa-sync-alt"},null,-1)],d={class:"fm-close"},f=[(0,r.createElementVNode)("i",{class:"fas fa-times"},null,-1)],p=(0,r.createElementVNode)("div",{class:"fm-tree"},[(0,r.createElementVNode)("div",{class:"fm-directory-tree"})],-1),m={class:"fm-bottombar"},h=["innerHTML"],v={class:"fm-select-btn"},g=["disabled"],y=[(0,r.createElementVNode)("i",{class:"btn-icon fas fa-check"},null,-1),(0,r.createTextVNode)("Select")],b=[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("div",null,"Upuść pliki tutaj...")])],-1)],E=["onClick"],w=(0,r.createElementVNode)("i",{class:"dropdown-icon fas fa-trash"},null,-1),x={__name:"Filemanager",props:["options","callbacks","services"],setup(e){const t=e,x=n(299).Z,{defineProps:N,onMounted:O,provide:S,reactive:R,computed:C,ref:A}=n(311);S("eventDispatcher",t.services.eventDispatcher),S("commandBus",t.services.commandBus),S("selection",t.services.selection);const k=t.services.selection,B=t.services.commandBus,T=t.services.eventDispatcher,D=R({active:!1,opened:!1,dragonDropActive:!1,progressbar:null,status:""}),_=function(){D.opened=!1,D.active=!1,T.dispatch("closed")},j=function(){D.opened=!0,D.active=!0,T.dispatch("opened")};O((()=>{if(B.command("close",_),B.command("open",j),B.command("status",(e=>D.status=e)),t.options.targetInput){let e=document.querySelector(t.options.targetInput);e&&e.value&&t.services.selection.select(e.value)}if(t.options.openTrigger){let e=document.querySelector(t.options.openTrigger);e&&e.addEventListener("click",(()=>j()))}t.options.showOnInit&&j()}));const V=function(){t.options.closeOnSelect&&_()},P=A(!1),U=()=>{P.value=0!==k.getSelected().length};O((()=>{T.on("selection.change",U),T.on("files.selected",V),T.on("files.list.new",(e=>k.select(e)))}));const L=R({items:[],context:null,opened:!1,position:{x:0,y:0}}),F=(e,t,n)=>{e&&(L.context=n,L.type=t,L.items=[],B.execute("contextmenu.items",L.items,L.type,L.context),B.execute("contextmenu.items."+L.type,L.items,L.context),L.position.x=e.x,L.position.y=e.y,L.opened=L.items.length>=1)},z=()=>{L.opened=!1};O((()=>{B.command("contextmenu",F),document.body.addEventListener("click",z)}));const I=n(986).Z,q=A("fileupload"),M=new I((e=>t.options.endpoint+"?cmd="+e)),J=e=>{M.upload(FileAPI.getFiles(e),null,Z),q.value=null},Z=(e,t)=>{0===e?D.progressbar=0:100===e?(T.dispatch("upload.uploaded",t),D.progressbar=100,setTimeout((function(){D.progressbar=null}),500)):D.progressbar=e};return O((()=>{FileAPI.support.dnd&&$(document).dnd((function(e){D.dragonDropActive=!!e}),(function(e){D.active&&e.length&&M.upload(e,null,Z)}))})),(t,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)({"tulia-filemanager":!0,"fm-opened":D.opened})},[(0,r.createElementVNode)("div",{class:"fm-bg",onClick:n[0]||(n[0]=e=>_())}),(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("button",a,[c,(0,r.createElementVNode)("input",{type:"file",ref_key:"fileupload",ref:q,class:"fm-upload",multiple:"",onChange:J},null,544)])]),(0,r.createElementVNode)("div",l,[(0,r.createCommentVNode)('                    <button type="button" class="btn btn-outline-secondary btn-icon-only" data-cmd="back" title="Go back"><i class="btn-icon fas fa-chevron-left"></i></button>'),(0,r.createElementVNode)("button",{type:"button",class:"btn btn-outline-secondary btn-icon-only",title:"Refresh",onClick:n[1]||(n[1]=e=>(0,r.unref)(B).execute("files.list.refresh"))},u),(0,r.createCommentVNode)('                    <button type="button" class="btn btn-outline-secondary btn-icon-only" data-action="new-directory" title="New directory"><i class="btn-icon fas fa-folder-plus"></i></button>\n                    <div class="dropdown d-inline-block">\n                        <button class="btn btn-outline-secondary btn-icon-only" type="button" data-bs-toggle="dropdown" title="Order by"><i class="btn-icon fas fa-sort-alpha-down"></i></button>\n                        <div class="dropdown-menu">\n                            <a class="dropdown-item active dropdown-item-with-icon" href="#" data-cmd="order-by-created-desc"><i class="dropdown-icon fas fa-sort-amount-down-alt"></i>Newest first</a>\n                            <a class="dropdown-item dropdown-item-with-icon" href="#" data-cmd="order-by-created-asc"><i class="dropdown-icon fas fa-sort-amount-down"></i>Oldest first</a>\n                            <a class="dropdown-item dropdown-item-with-icon" href="#" data-cmd="order-by-name-asc"><i class="dropdown-icon fas fa-sort-alpha-down"></i>By name</a>\n                            <a class="dropdown-item dropdown-item-with-icon" href="#" data-cmd="order-by-name-desc"><i class="dropdown-icon fas fa-sort-alpha-down-alt"></i>By name</a>\n                        </div>\n                    </div>')]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("button",{type:"button",onClick:n[2]||(n[2]=e=>_())},f)])]),p,(0,r.createElementVNode)("div",{class:"fm-body",onClick:n[3]||(n[3]=e=>(0,r.unref)(k).clear())},[(0,r.createVNode)((0,r.unref)(x),{options:e.options},null,8,["options"])]),(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)({"fm-upload-progressbar":!0,"fm-hidden":null===D.progressbar})},[(0,r.createElementVNode)("span",{class:"fm-meter",style:(0,r.normalizeStyle)({width:D.progressbar+"%"})},null,4)],2),(0,r.createElementVNode)("div",{class:"fm-status",innerHTML:D.status},null,8,h),(0,r.createElementVNode)("div",v,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-primary btn-icon-left",disabled:!P.value,onClick:n[4]||(n[4]=e=>B.execute("select"))},y,8,g)])])]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)({"fm-dragondrop-area":!0,"fm-hidden":!D.dragonDropActive})},b,2),((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{to:"body"},[L.opened?((0,r.openBlock)(),(0,r.createElementBlock)("ul",{key:0,class:"dropdown-menu show fm-contextmenu",style:(0,r.normalizeStyle)({top:L.position.y+"px",left:L.position.x+"px"})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(L.items,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("li",null,[(0,r.createElementVNode)("a",{class:"dropdown-item dropdown-item-with-icon dropdown-item-danger",href:"#",onClick:e.onClick},[w,(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.label),1)],8,E)])))),256))],4)):(0,r.createCommentVNode)("v-if",!0)]))],2))}}},299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(311);const o={class:"fm-files-list"},s=["onClick","onContextmenu"],i=["data-file-id"],a={class:"fm-file-inner"},c=(0,r.createElementVNode)("div",{class:"fm-file-preview"},[(0,r.createElementVNode)("span",{class:"fm-file-image"})],-1),l=["title"],u=["data-file-id"],d={class:"fm-file-inner"},f={class:"fm-file-extension"},p={class:"fm-file-preview"},m=(0,r.createElementVNode)("span",{class:"fm-file-check"},null,-1),h=["title"],v={key:0,class:"fm-files-list-empty"},g=[(0,r.createElementVNode)("i",{class:"fa-regular fa-file"},null,-1)],y={__name:"FilesList",props:["options"],setup(e){const t=e,y=n(669).default,{defineProps:b,onMounted:E,reactive:w,inject:x,watch:N,toRaw:O}=n(311),S=x("eventDispatcher"),R=x("commandBus"),C=x("selection"),A=w({loading:!0}),k=w({list:[],delete:e=>{Array.isArray(e)||(e=[e]);for(let t in k.list)for(let n in e)k.list[t].id===e[n]&&k.list.splice(t,1)},fetch:e=>{let t=[];for(let n in k.list)for(let r in e)k.list[n].id===e[r]&&t.push(O(k.list[n]));return t}}),B={times:0,timer:null},T=()=>{let e={size:0,files:[]};for(let t in k.list)C.isSelected(k.list[t].id)?(k.list[t].selected=!0,e.size+=k.list[t].size,e.files.push(k.list[t])):k.list[t].selected=!1;let t="";1===e.files.length?t="Selected: <b>"+e.files[0].name+"</b> <i>"+e.files[0].size_formatted+"</i>":e.files.length>1&&(t="Selected files: "+e.files.length),R.execute("status",t)},D=()=>{A.loading=!0,k.list=[],y.post(t.options.endpoint+"?cmd=ls&filter=").then((function(e){k.list=e.data,T(),A.loading=!1})).catch((function(e){console.log(e)}))},_=e=>{for(let t in e)k.list.unshift(e[t]),S.dispatch("files.list.new",e[t].id)},j=e=>{Tulia.Confirmation.confirm({title:`You really want do delete selected ${e.length} file(s)?`}).then((n=>{n.value&&y.post(t.options.endpoint+"?cmd=delete&id="+e.join(",")).then((function(t){k.delete(e),C.deselect(e)})).catch((function(e){console.log(e)}))}))},V=(e,t)=>{e.push({onClick:()=>R.execute("files.list.delete",t),label:"Delete file"})},P=function(){const e=C.getSelected(),n=k.fetch(e);if(t.options.targetInput){const n=document.querySelector(t.options.targetInput);e[0]?n.value=e[0]:n.value=null,n.dispatchEvent(new Event("change"))}else t.options.onSelect&&t.options.onSelect(n);S.dispatch("files.selected",e,n)};return E((()=>{D(),R.command("select",P),R.command("files.list.refresh",D),R.command("contextmenu.items.file",V),R.command("files.list.delete",j),S.on("opened",(()=>{B.times=0})),S.on("upload.uploaded",_),S.on("selection.change",T)})),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",o,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(k.list,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"fm-file-outer",onClick:(0,r.withModifiers)((t=>(e=>{var t;R.execute("contextmenu",null),B.times++,1===B.times?(t=e.id,e.name,e.size,C.toggle(t),T(),setTimeout((()=>{B.times=0}),200)):((e=>{C.clear(),C.select(e),T(),R.execute("select")})(e.id),B.times=0)})(e)),["stop"]),onContextmenu:(0,r.withModifiers)((t=>((e,t)=>{C.toggle(t),R.execute("contextmenu",e,"file",C.getSelected())})(t,e.id)),["prevent"])},["directory"===e.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)({"fm-file":!0,"fm-file-active":e.selected}),"data-class":"'fm-file-type-' + file.type","data-type":"directory","data-file-id":e.id},[(0,r.createElementVNode)("div",a,[c,(0,r.createElementVNode)("div",{class:"fm-file-name",title:e.name},(0,r.toDisplayString)(e.name),9,l)])],10,i)):((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:(0,r.normalizeClass)({"fm-file":!0,"fm-file-active":e.selected}),"data-class":"'fm-file-type-' + file.type","data-type":"file","data-file-id":e.id},[(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",f,(0,r.toDisplayString)(e.extension),1),(0,r.createElementVNode)("div",p,[m,(0,r.createElementVNode)("span",{class:"fm-file-image",style:(0,r.normalizeStyle)({"background-image":"url("+e.preview+")"})},null,4)]),(0,r.createElementVNode)("div",{class:"fm-file-name",title:e.name},(0,r.toDisplayString)(e.name),9,h)])],10,u))],40,s)))),256))]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)({"fm-files-list-loader":!0,"fm-active":A.loading})},null,2),0===k.list.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",v,g)):(0,r.createCommentVNode)("v-if",!0)]))}}},808:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=class{commands=[];command(e,t){this.commands.push({command:e,callable:t})}execute(e,...t){for(let n=0;n<this.commands.length;n++)this.commands[n].command===e&&this.commands[n].callable.apply(null,t)}}},624:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=class{events=[];on(e,t,n){e=e.split(","),n=n||100;for(let r=0;r<e.length;r++){let o=e[r].trim();this.events[o]||(this.events[o]=[]),this.events[o].push({listener:t,priority:n}),this.events[o].sort((function(e,t){return t.priority-e.priority}))}return this}dispatch(e,...t){if(!this.events[e])return this;t=t||[];let n=this;for(let r=0;r<this.events[e].length;r++)this.events[e][r].listener.apply(n,t);return this}}},402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=class{eventDispatcher;multiple;selected=[];constructor(e,t){this.eventDispatcher=e,this.multiple=t}getSelected(){return this.selected}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}select(e){this.multiple?this.selected.push(e):this.selected=[e],this.eventDispatcher.dispatch("selection.change")}selectOnly(e){this.selected=[e],this.eventDispatcher.dispatch("selection.change")}deselect(e){for(let t=0;t<this.selected.length;t++)this.selected[t]===e&&this.selected.splice(t,1);this.eventDispatcher.dispatch("selection.change")}isSelected(e){return 0<=this.selected.indexOf(e)}clear(){this.selected=[],this.eventDispatcher.dispatch("selection.change")}}},986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});class r{endpoint;progressbar;totalSize=0;files=[];uploadedFiles=[];constructor(e,t){this.endpoint=e,this.progressbar=t}upload(e,t){let n=this;this.progressbar.call(null,0),this.files=[],this.uploadedFiles=[];for(let t=0;t<e.length;t++)this.totalSize+=e[t].size,this.files.push({name:e[t].name,size:e[t].size,loaded:0});FileAPI.upload({url:this.endpoint("upload"),data:{directory:t},files:{file:e},progress:function(e,t){n.progressbar.call(null,n.calculateLoadedSize(e,t)/n.totalSize*100)},complete:function(e,t,r){let o=JSON.parse(t.responseText);n.progressbar.call(null,100,n.uploadedFiles),n.reset(),o&&"error"===o.status&&swal({title:"Nie udało się :(",text:o.message,type:"error"})},filecomplete:function(e,t,r){let o=JSON.parse(t.responseText);for(let e in o.uploaded_files)n.uploadedFiles.push(o.uploaded_files[e])}})}calculateLoadedSize(e,t){let n=0;for(let r=0;r<this.files.length;r++)this.files[r].name===t.name&&(this.files[r].loaded=e.loaded),n+=this.files[r].loaded;return n}reset(){this.totalSize=0}}const o=class{endpoint;constructor(e){this.endpoint=e,window.FileAPI||console.error("FileAPI extension not loaded.")}upload(e,t,n){return new r(this.endpoint,n).upload(e,t)}}},311:e=>{"use strict";e.exports=Vue}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";n.d(r,{default:()=>a});const e=n(465).Z,t=n(624).Z,o=n(808).Z,s=n(402).Z;class i{vue;data;services;instance;constructor(t,n,r){this.instance=n,this.services=this.createServices(r),this.data={options:r,instance:this.instance,services:this.services},this.vue=Vue.createApp(e,this.data),this.vue.config.devtools=!1,this.vue.config.debug=!1,this.vue.config.silent=!0,this.vue.mount("#"+t)}open(){this.services.commandBus.execute("open")}close(){this.services.commandBus.execute("close")}createServices(e){const n=new t;return{eventDispatcher:n,commandBus:new o,selection:new s(n,e.multiple)}}}const a={instancesCounter:0,create:function(e){return this.preconditions(),this.instancesCounter++,this.instances[this.instancesCounter]=new i(this.createContainerInBody(this.instancesCounter),this.instancesCounter,e)},trans:function(e,t,n){},createContainerInBody:function(e){let t=document.querySelector("#tulia-filemanager-container");t||(t=document.createElement("div"),t.id="tulia-filemanager-container",document.body.appendChild(t));const n=document.createElement("div");return n.id="tulia-filemanager-instance-"+e,t.appendChild(n),n.id},translations:{},instances:{},defaults:{},preconditions(){window.FileAPI||console.error("FileAPI extension not loaded.")}}})(),TuliaFilemanager=r.default})();
//# sourceMappingURL=tulia-filemanager.js.map