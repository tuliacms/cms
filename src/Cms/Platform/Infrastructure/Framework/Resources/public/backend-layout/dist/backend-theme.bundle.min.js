var Tulia;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n}),(Tulia=Tulia??{}).UI={},Tulia.UI.init=function(){if($.fn.datetimepicker&&($.fn.datetimepicker.Constructor.Default=$.extend({},$.fn.datetimepicker.Constructor.Default,{icons:{time:"far fa-clock",date:"far fa-calendar",up:"far fa-arrow-up",down:"far fa-arrow-down",previous:"far fa-chevron-left",next:"far fa-chevron-right",today:"far fa-calendar-check-o",clear:"far fa-trash",close:"far fa-times"}})),Tulia.Menu&&new Tulia.Menu("aside .lead-menu"),Tulia.SearchAnything&&new Tulia.SearchAnything(".search-anything-container"),Tulia.Toasts&&new Tulia.Toasts,Tulia.Form.createForEach("form"),Tulia.PageLoader.init(),"undefined"!=typeof SimpleBar){let t=document.getElementById("notifications-scrollarea");if(t){let e=new SimpleBar(t);$(".notifications-list .dropdown").on("shown.bs.dropdown",(function(){e.recalculate()}))}}$(document).on("click",".dropdown-prevent-close .dropdown-menu",(function(t){t.stopPropagation()})),$(".toggle-fullscreen").click((function(){Tulia.Fullscreen.toggle()}));let t=$("body");new Tulia.ScrollDecider(3,(function(){t.removeClass("header-fixed")}),(function(){t.addClass("header-fixed")})).start(),$("#mobile-menu-trigger").click((()=>{$("body").toggleClass("main-menu-opened")})),$(".mobile-menu-content-overlay").click((()=>{$("body").removeClass("main-menu-opened")})),Tulia.UI.refresh(t)},Tulia.UI.refresh=function(t){$.fn.chosen&&t.find("select.form-select-custom").not(".ui-done-select").addClass("ui-done-select").chosen({search_contains:!0,width:"100%",disable_search_threshold:6}).on("ui:update",(function(){$(this).trigger("chosen:updated")})),bootstrap.Tooltip&&[].slice.call(t.get(0).querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)}))},Tulia.PageLoader={loader:null,init:function(){this.getLoader(),$("body").on("click",".tulia-click-page-loader",(function(){Tulia.PageLoader.show()}))},show:function(){this.getLoader().addClass("active")},hide:function(){this.getLoader().removeClass("active")},getLoader:function(){return this.loader||(this.loader=$('<div class="page-loader">Please wait...</div>'),this.loader.appendTo("body")),this.loader}},Tulia.Form=function(t,e){this.form=t,this.options=e,this.controls=null,this.init=function(){"string"==typeof this.form&&(this.form=$(this.form)),this.bindEvents(),this.bindSubmitters(),this.bindLeaveUnsavedNotice()},this.bindEvents=function(){let t=this;this.form.on("tulia:form:submitted",(function(){t.submitted()}))},this.bindSubmitters=function(){let t=this,e=this.getFormId();$("[data-submit-form]").each((function(){let n=$(this).attr("data-submit-form");n!==e&&n!=="#"+e||$(this).click((function(e){e.preventDefault(),Tulia.PageLoader.show(),setTimeout((function(){t.form.trigger("submit")}),150)}))}))},this.bindLeaveUnsavedNotice=function(){let t=this;this.controls=this.form.serialize(),$("body").on("click","a",(function(e){let n=$(this);if(t.isValidLink(n)&&!1===t.isPrevented(n)){if(t.controls===t.form.serialize())return;e.preventDefault(),Tulia.Confirmation.warning({title:"Unsaved form!",text:"Do You want cancel form?"}).then((function(t){t.value&&(document.location.href=n.prop("href"))}))}}))},this.submitted=function(){this.controls=this.form.serialize()},this.isPrevented=function(t){return t.hasClass("tulia-form-prevent-confirm")},this.isValidLink=function(t){let e=t.prop("href"),n=t.attr("href");return!(!e||!n)&&"#"!==n&&"#"!==n.substring(0,1)&&"javascript:;"!==n},this.getFormId=function(){return this.form.attr("id")},this.init()},Tulia.Form.createForEach=function(t,e){$(t).each((function(){new Tulia.Form($(this),e)}))},Tulia.Form.defaults={},Tulia.Info={fire:function(t){return Tulia.Info.swal.fire(t)},info:function(t){return"string"==typeof t&&(t={title:t}),t=$.extend(!0,{},{title:"Operation done",type:"info",customClass:{confirmButton:"btn btn-primary"},focusConfirm:!1,showCancelButton:!1,confirmButtonText:"Ok"},t),Tulia.Info.fire(t)},success:function(t){return"string"==typeof t&&(t={title:t}),t=$.extend(!0,{},{title:"Operation done",type:"success",customClass:{confirmButton:"btn btn-success"},focusConfirm:!1,showCancelButton:!1,confirmButtonText:"Ok"},t),Tulia.Info.fire(t)}},Tulia.Info.swal=null,Tulia.Confirmation={fire:function(t){return Tulia.Confirmation.swal.fire(t)},warning:function(t){return t=$.extend(!0,{},{title:"Are You sure?",text:"This operation cannot be undone!",type:"warning",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-secondary"},showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},t),Tulia.Confirmation.fire(t)},confirm:function(t){return t=$.extend(!0,{},{title:"Are You sure?",text:"You really want to do this operation?",type:"warning",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-secondary"},showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"},t),Tulia.Confirmation.fire(t)}},Tulia.Confirmation.swal=null,"undefined"!=typeof Swal&&(Tulia.Info.swal=Tulia.Confirmation.swal=Swal.mixin({customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-secondary"},buttonsStyling:!1})),Tulia.ScrollDecider=function(t,e,n){this.breakpoint=t,this.beforeCallback=e,this.afterCallback=n,this.isBeforeBreakpoint=!1,this.start=function(){var t=this;$(window).scroll((function(){t.decide()})),t.decide()},this.decide=function(){this.isBeforeBreakpoint?$(window).scrollTop()<this.breakpoint&&(this.isBeforeBreakpoint=!1,this.beforeCallback()):$(window).scrollTop()>this.breakpoint&&(this.isBeforeBreakpoint=!0,this.afterCallback())}},Tulia.Fullscreen={status:!1,element:document.documentElement,toggle:function(){this.status?this.off():this.on()},on:function(){this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen&&this.element.msRequestFullscreen(),this.status=!0},off:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.status=!1}},Tulia.Menu=function(t){this.selector=t,this.menu=null,this.init=function(){this.menu=$(this.selector);let t=this;this.menu.find("li.has-dropdown > a").click((function(e){$(this).next("ul").length&&(e.preventDefault(),$(this).parent().addClass("animated").toggleClass("dropdown-opened"),t.updateOpenedDropdownInStorage())}))},this.updateOpenedDropdownInStorage=function(){let t=[];this.menu.find(".dropdown-opened").each((function(){$(this).find("> ul").length&&t.push($(this).attr("data-item-id"))})),Cookies.set("aside-menuitems-opened",t.join("|"))},this.init()},Tulia.Toasts=function(){this.container=null,this.init=function(){Tulia.Toasts.instance=this,this.container=$('<div aria-live="polite" aria-atomic="true" style="position:fixed;top:65px;right:15px;z-index:1000;"></div>'),$("body").append(this.container)},this.show=function(t){let e=$(Tulia.Toasts.defaults.template);e.find(".toast-body").text(t.content),e.find("strong").text(t.headline),this.container.append(e),e.toast({delay:3e3}).toast("show")},this.init()},Tulia.Toasts.defaults={template:'<div class="toast" role="alert" aria-live="assertive" aria-atomic="true">      <div class="toast-header">        <strong class="mr-auto"></strong>        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">          <span aria-hidden="true">&times;</span>        </button>      </div>      <div class="toast-body"></div>    </div>'},Tulia.Toasts.instance=null,Tulia.Toasts.success=function(t){"string"==typeof t&&(t={theme:"success",headline:"Powodzenie",content:t}),Tulia.Toasts.instance.show(t)},Tulia.Toasts.danger=function(t){"string"==typeof t&&(t={theme:"danger",headline:"Błąd",content:t}),Tulia.Toasts.instance.show(t)},Tulia.Toasts.warning=function(t){"string"==typeof t&&(t={theme:"warning",headline:"Uwaga",content:t}),Tulia.Toasts.instance.show(t)},Tulia.Toasts.info=function(t){"string"==typeof t&&(t={theme:"info",headline:"Informacja",content:t}),Tulia.Toasts.instance.show(t)},Tulia.SearchAnything=function(t,e){this.selector=t,this.options=e,this.container=null,this.template=null,this.query=null,this.loading=!1,this.results=[],this.debounceSearch=null,this.elm={query:null,intro:null,noResults:null,results:null},this.init=function(){this.container=$(this.selector),this.options=$.extend({},Tulia.SearchAnything.defaults,this.options);let t=this;$(this.options.trigger).click((function(){t.open()})),$("body").keydown((function(e){t.isOpened()&&27===e.which&&t.close()})),this.debounceSearch=_.debounce(t.search,500),this.createView()},this.search=function(){let t=this;this.results=[],this.elm.searchResults.empty(),t.hideIntro(),t.hideEmptyResults(),t.showLoader(),$.ajax({url:this.options.endpoint,data:{q:this.query},dataType:"json",success:function(e){t.hideLoader(),e&&0!==e.length?(t.showResults(),t.render(e)):(t.showEmptyResults(),t.hideResults())},error:function(){t.hideLoader(),t.showEmptyResults()}})},this.render=function(t){let e='<div class="search-result-group"><i class="section-icon fas fa-search"></i>   <div class="section-hl">Search results</div>   <div class="result-links">';for(let n in t){let i=t[n],s="";if(i.tags&&i.tags.length){s='<div class="link-tags">';for(let t in i.tags)s+='<span class="link-tag"><i class="link-tag-icon '+i.tags[t].icon+'"></i> '+i.tags[t].tag+"</span>";s+="</div>"}e+='<a class="result-link '+(i.image?"has-image":"")+'" href="'+i.link+'">'+(i.image?'<div class="link-image"><div class="link-image-item" style="background-image:url('+i.image+')"></div></div>':"")+'    <div class="link-details">        <div class="link-head">            <span class="link-label" title="'+i.title+'">                '+i.title+'            </span>        </div>        <div class="link-body">'+(i.description?'<div class="link-description">'+i.description+"</div>":"")+"            "+s+"        </div>    </div></a>"}e+="</div></div>",this.elm.searchResults.html(e)},this.resetView=function(){this.elm.intro.removeClass("d-none"),this.elm.results.addClass("d-none"),this.elm.noResults.addClass("d-none"),this.hideLoader()},this.hideIntro=function(){this.elm.intro.addClass("d-none")},this.showLoader=function(){this.showResults(),this.container.find(".tsa-loading-show").removeClass("d-none"),this.container.find(".tsa-loading-hide").addClass("d-none"),this.elm.searchResults.addClass("d-none"),this.elm.searchLoader.removeClass("d-none")},this.hideLoader=function(){this.container.find(".tsa-loading-show").addClass("d-none"),this.container.find(".tsa-loading-hide").removeClass("d-none"),this.elm.searchResults.removeClass("d-none"),this.elm.searchLoader.addClass("d-none")},this.showEmptyResults=function(){this.elm.noResults.removeClass("d-none")},this.hideEmptyResults=function(){this.elm.noResults.addClass("d-none")},this.showResults=function(){this.elm.results.removeClass("d-none")},this.hideResults=function(){this.elm.results.addClass("d-none")},this.createView=function(){let t=this;this.elm.query=this.container.find(".query"),this.elm.queryPreview=this.container.find(".tsa-query-preview"),this.elm.intro=this.container.find(".search-info"),this.elm.results=this.container.find(".search-results-wrapper"),this.elm.noResults=this.container.find(".search-no-results-wrapper"),this.elm.searchResults=this.container.find(".search-results"),this.elm.searchLoader=this.container.find(".search-loader"),this.container.find(".closer").click((function(){t.close()})),this.elm.query.on("change keydown keyup",(function(){let e=$(this).val();t.query!==e&&(t.query=e,t.elm.queryPreview.text(e),t.results=[],e?(t.hideIntro(),t.hideEmptyResults(),t.showLoader(),t.debounceSearch()):(t.resetView(),t.debounceSearch.cancel()))}))},this.isOpened=function(){return this.container.hasClass("opened")},this.open=function(){this.resetView(),$("body").addClass("prevent-scroll"),this.container.addClass("opened"),this.container.find(".query").val("").trigger("change").focus()},this.close=function(){this.results=[],this.container.removeClass("opened"),this.debounceSearch.cancel(),$("body").removeClass("prevent-scroll")},this.init()},Tulia.SearchAnything.defaults={trigger:".search-area",endpoint:Tulia.Globals&&Tulia.Globals.search_anything&&Tulia.Globals.search_anything.endpoint?Tulia.Globals.search_anything.endpoint:null},Tulia.ElementsActions=function(t){this.options=t,this.root=null,this.init=function(){this.options=$.extend({},Tulia.ElementsActions.defaults,this.options),this.root=this.options.root?this.options.root:$("body");for(let t in this.options.actions)this.options.actions[t]=$.extend({},Tulia.ElementsActions.actionsDefaults,this.options.actions[t]);let t=this;this.root.find(this.options.selectors.selected).click((function(){let e=$(this).attr("data-action");if(!t.options.actions[e])return;let n=t.getSelectedItems();if(!n)return;let i={action:t.options.actions[e].action,headline:t.options.actions[e].headline,question:t.options.actions[e].question,elements:n};if(!t.options.actions[e].confirmation)return t.proceed(i);t.prepareAndOpenModal(i)})),this.root.find(this.options.selectors.single).click((function(){let e=$(this).attr("data-action");if(!t.options.actions[e])return;let n={action:t.options.actions[e].action,headline:t.options.actions[e].headline,question:t.options.actions[e].question,elements:[{id:$(this).closest("tr").attr("data-element-id"),name:$(this).closest("tr").attr("data-element-name")}]};if(!t.options.actions[e].confirmation)return t.proceed(n);t.prepareAndOpenModal(n)}));let e=this.root.find(this.options.selectors.selected).closest(".dropdown");if(0===e.length)return;let n=e.find("[data-toggle=dropdown]");n.prop("disabled","disabled"),$(this.options.selectors.checkbox).change((function(){0===t.getSelectedItems().length?n.prop("disabled","disabled"):n.prop("disabled",!1)}))},this.getSelectedItems=function(){let t=[];return $(this.options.selectors.checkbox+":checked").each((function(){t.push({id:$(this).closest("tr").attr("data-element-id"),name:$(this).closest("tr").attr("data-element-name")})})),t},this.prepareAndOpenModal=function(t){let e=this,n=t.question,i=[];for(let e in t.elements)i.push(t.elements[e].name);n=n+"<br /> [ "+i.join(", ")+" ]",Tulia.Confirmation.warning({title:t.headline}).then((function(n){n.value&&e.proceed(t)}))},this.proceed=function(t){Tulia.PageLoader.show();let e=$('<form action="" method="POST"></form>');e.attr("action",t.action),e.addClass("d-none");for(let n in t.elements)e.append('<input type="hidden" name="ids[]" value="'+t.elements[n].id+'" />');e.appendTo("body"),e.trigger("submit")},this.init()},Tulia.ElementsActions.defaults={actions:{},root:null,selectors:{selected:".action-element-selected",single:".action-element-single",checkbox:".action-element-checkbox"}},Tulia.ElementsActions.actionsDefaults={headline:null,question:null,action:null,confirmation:!0};const n=Tulia;Tulia=e.default})();
//# sourceMappingURL=backend-theme.bundle.min.js.map